#!/usr/bin/env testml

parse(*yaml) == *events
  :"parse('{*yaml}')"


===
--- yaml: ""
--- events
+STR
-STR


===
--- yaml: foo
--- events
+STR
+DOC
=VAL :foo
-DOC
-STR


===
--- yaml
foo
--- ^events


===
--- yaml: "   foo  "
--- ^events


===
--- SKIP
--- yaml(<)
    # comment

    foo
--- ^events


===
--- yaml(-)
"foo"
--- events
+STR
+DOC
=VAL "foo
-DOC
-STR


===
--- yaml: "'foo'"
--- events
+STR
+DOC
=VAL 'foo
-DOC
-STR


===
--- SKIP
--- yaml
|
  foo
--- events
+STR
+DOC
=VAL |foo\n
-DOC
-STR


===
--- yaml: []
--- events
+STR
+DOC
+SEQ []
-SEQ
-DOC
-STR


===
--- yaml: [1,2 2  ,333,]
--- events
+STR
+DOC
+SEQ []
=VAL :1
=VAL :2 2
=VAL :333
-SEQ
-DOC
-STR


===
--- SKIP
--- yaml: [[]]
--- events
+STR
+DOC
+SEQ []
+SEQ []
-SEQ
-SEQ
-DOC
-STR


===
--- yaml: {foo: 'bar'}
--- events
+STR
+DOC
+MAP {}
=VAL :foo
=VAL 'bar
-MAP
-DOC
-STR


===
--- SKIP
--- yaml
foo: 'bar'
--- events
+STR
+DOC
+MAP {}
=VAL :foo
=VAL 'bar
-MAP
-DOC
-STR
